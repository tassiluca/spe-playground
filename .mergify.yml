pull_request_rules:
  - name: Ping PR author when conflicting
    description: Warn the pull request author when their PR are conflicting
    conditions:
      - conflict
      - '-closed'
    actions:
      comment:
        message: >
          ðŸ‘‹ {{author}} your PR is conflicting and needs to be updated to be
          merged ðŸ˜‰
  - name: Automatic rebase when CI passes and approved
    conditions:
      - or:
        - check-success=success
        - check-neutral=success
        - check-skipped=success
      - '#approved-reviews-by>=2'
      - base=main
      - label=auto-rebase
      - '-draft'
      - '-conflict'
    actions:
      merge:
        method: rebase
  - name: Automatic squash merge when CI passes and approved
    conditions:
      - '#approved-reviews-by>=2'
      - check-success=success
      - base=main
      - label=auto-squash
      - '-draft'
      - '-conflict'
    actions:
      merge:
        method: squash
  - name: Delete head branch after merge but not if other PRs depend on it
    conditions:
      - merged
    actions:
      delete_head_branch:
        force: false
